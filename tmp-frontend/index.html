<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>2242 Online Temporary Frontend</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <p class="ms">
      ghj
    </p>
    <button class="btn">
      Send cmd request
    </button>
  </body>
  <script>

   let keys = {
       A: false,
       W: false,
       D: false,
       S: false,
       ce: false, // space
       Q: false
   }

   $(document).ready(function() {
       $(document).on("keydown", event => {
           let key = event.code.slice(3, (event.code.length))
           if (keys.hasOwnProperty(key)) {
               keys[key] = true
           }
       });

       $(document).on("keyup", event => {
           let key = event.code.slice(3, (event.code.length))
           if (keys.hasOwnProperty(key)) {
               keys[key] = false;
           }
       });
   });

   function loop() {
       setTimeout(() => {
            keys.ping = Date.now()
           axios.post("/cmd", keys)
                .then(res => {
                    console.log(res.data.ping)
                    console.log(Date.now())
                    console.log("\n")
                })

           if (keys.ce) return;
           loop()
       }, 200)
   }

   loop()

  </script>
</html>
